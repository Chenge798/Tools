##### 你对护网的了解有多少？

护网就是一场网络安全的大比拼，有些人要攻，有些人要防，看谁能赢得分数多。护网是国家安排的，参加的单位都是重要的，如果被攻破了，不仅丢分，还可能丢官。护网每年都有，不同地方不同时间，今年因为有特殊的纪念日，所以提前了。护网的时候，要按照规矩来，不能乱搞，不能损坏别人的东西，不能影响别人的工作，不能用非法的方法。



##### 有没有hvv经验？

- 我去年参加的是上海工商银行的hw，面的是蓝队初级。
  
  通过中介进入奇安信
  
  7月中旬提前入场，7月底正式开始
  
  准备阶段主要负责协助运维人员进行资产梳理、漏洞扫描、渗透测试、安全加固等工作。
  正式阶段主要负责监控组的工作，使用了奇安信提供的天眼，实时监测和分析红队的攻击行为和特征，向研判组和处置组反馈高危告警，并协助进行应急响应和溯源。
  我遇到了一些挑战，如红队使用了一些隐蔽的攻击手法，如域名前缀混淆、流量加密、代理跳板等，导致我难以发现和识别攻击。
  复盘阶段主要负责整理和汇总自己的工作成果和经验教训，向领队报告自己的工作情况和遇到的问题



##### 自我介绍

我是一名学习网络专业的待业毕业生，去年参加过一次护网行动，面的是蓝队初级，在监控组工作。之前的求学阶段，在学校网络中心兼职过网络运维及数据中心运维，有两年多的网络运维经验，接触也使用过各大厂商的一些网络设备及安全设备。参加过一些大大小小的网络安全比赛，如安网杯、羊城杯、还有安徽省的网络攻防大赛，在比赛中也取得了一些成绩。目前考取了华为HCIP证书，对linux有一定的了解和使用经验，能够熟练操作常用的命令和工具，能够进行基本的系统配置和管理。



##### 要你hw有什么优势？

就如我刚才介绍的，之前有过护网和运维的经验，熟悉并使用过一些安全设备，也经历过大大小小的攻防演练和安全保障。相对于其他新手而言，我的上手能力会更强一点、能在短时间融入集体，配合开展工作。



##### 有没有接触过安全设备？

###### 入侵防御系统IPS

是计算机网络安全设施，是对防病毒软件和防火墙的补充。入侵预防系统是一部能够监视网络或网络设备的网络数据传输行为的计算机网络安全设备，能够即时的中断、调整或隔离一些不正常或是具有伤害性的网络数据传输行为。

###### 入侵检测系统IDS

积极主动的防护措施，按照一定的安全策略，通过软件，硬件对网络，系统的运行进行实时的监控，尽可能地发现网络攻击行为，积极主动的处理攻击，保证网络资源的机密性，完整性和可用性。

###### 防火墙

防火墙是位于两个(或多个)网络间，实行网络间访问或控制的一组组件集合之硬件或软件。隔离网络，制定出不同区域之间的访问控制策略来控制不同信任程度区域间传送的数据流。

###### 数据库审计系统

是对数据库访问行为进行监管的系统，通过镜像或者探针的方式采集所有数据库的访问流量，并基于SQL语法，语义的解析技术，记录下对数据库所有访问和操作行为，例如访问数据的用户IP，账号，时间等等，对数据进行操作的行为等等。

###### 日志审计系统

 日志审计系统能够通过主被动结合的手段，实时且不间断的采集用户网络中不同厂商的安全设备，网络设备，主机，操作系统以及各种应用系统产生的海量日志信息，并将这些信息汇集到审计中心，进行集中化存储，备份，查询，审计，告警，响应，并出具丰富的报表报告，获悉全网的整体安全运行态势，同时满足等保关于安全管理中心的日志保存时间大于6个月的要求。

###### 堡垒机

是针对内部运维人员的运维安全审计系统。主要功能是对运维人员的运维操作进行审计和权限控制(比如要登录某些平台或者系统只能通过堡垒机才可以，不用堡垒机是无法访问的)。同时堡垒机还有账号集中管理，单点登录(在堡垒机上登录即可实现对多个其他平台的无密登录)等功能。

###### 漏洞扫描系统

漏洞扫描工具或者设备是基于漏洞数据库，通过扫描等手段对指定的远程或本地计算机系统的安全脆弱性进行检测，发现可利用漏洞的一种安全检测系统(我们常用的针对WEB站点进行扫描的工具和此处漏洞扫描系统不是一个概念)。

###### 数据安全态势感知平台

以大数据平台为基础，通过收集多元，异构的海量日志，利用关联分析，机器学习，威胁情报，可视化等技术，帮助用户持续监测网络安全态势，实现从被动防御向积极防御的进阶。

###### 终端安全管理系统

是集防病毒，终端安全管控，终端准入，终端审计，外设管控，EDR等功能于一体，兼容不同操作系统和计算机平台，帮助客户实现平台一体化，功能一体化，数据一体化的终端安全立体防护。

###### WAF

WAF是以网站或应用系统为核心的安全产品，通过对HTTP或HTTPS的Web攻击行为进行分析并拦截，有效的降低网站安全风险。产品主要部署在网站服务器的前方。通过特征提取和分块检索技术进行模式匹配来达到过滤，分析，校验网络请求包的目的，在保证正常网络应用功能的同时，隔绝或者阻断无效或者非法的攻击请求。

###### 蜜罐

蜜罐是一种安全威胁的主动防御技术，它通过模拟一个或多个易受攻击的主机或服务来吸引攻击者，捕获攻击流量与样本，发现网络威胁，提取威胁特征，蜜罐的价值在于被探测，攻陷。


深信服态势感知、网络流量探针、威胁探针 

奇安信天眼、奇安信堡垒机

天融信WAF、天融信日志审计

派网上网行为管理

山石IPS、山石防火墙、

东软日志审计、东软数据库审计系统、

神州数码防火墙、神州数码WAF、神州数码DCBI、

华为防火墙、锐捷防火墙、华三防火墙



##### 什么是sql注入

###### 在数据交互中，前端的数据传入到后台处理时，由于后端没有做严格的判断，导致其传入的“数据”拼接到SQL语句中后，被当作SQL语句的一部分执行

分类：报错注入、盲注、时间盲注、二次注入，宽字节,堆叠注入，http header的注入，xff，cookie注入

###### 怎么修复

使用预编译，PDO，正则表达式过滤，开启魔术引号，加装WAF等。

数字型不需要单引号来闭合，而字符串一般需要通过单引号来闭合的。



##### 0x00（%00）截断原理:

 0x00是十六进制表示方法,是ascii码为0的字符,在有些函数处理时,会把这个字符当做结束符。



##### shiro有几种漏洞类型，谈谈你对shrio的理解

Shiro是一个Java安全框架，它可以帮助开发者实现身份验证、授权、加密和会话管理等功能。

shiro 550   验证漏洞   反序列化漏洞   

shiro 721  



##### 了解过内网嘛

内网是一个特殊的网络，它只能由特定的用户访问。例如，一个公司的内网可能只有公司内部的员工才能访问，而不会让外部用户访问。
内网一般是用于局域网内部的计算机之间的互相通信，如果需要访问Internet，需要借助外网的出口。
内网相对外网会多一层安全防火墙，相对来说抵御来自外网的攻击能力会好一些。



##### 常见的中间件漏洞

IIS、Apache、Nginx、Tomcat、JBoss、WebLogic、Apache Shiro反序列化漏洞

```IIS
PUT漏洞、短文件名猜解、远程代码执行、解析漏洞
```

```
解析漏洞、目录遍历
```

```
文件解析、目录遍历、CRLF注入、目录穿越
```

```
远程代码执行、war后门文件部署
```

```
反序列化漏洞、war后门文件部署
```

```
反序列化漏洞SSRF任意文件上传war后门文件部署
```

```
Shiro rememberMe（Shiro-550） Shiro Padding Oracle Attack(Shiro-721)
```



##### 有哪些waf的绕过方法

###### 1.大小写绕过

比如waf拦截union select，可以构造Union sElEcT来绕过。

###### 2.特殊字符替换空格或注释绕过

可以用注释来替代空格进行绕过，有些waf在检测时不会识别注释或者将注释替换掉，如sqlserver中可以用/*/代替空格，在mysql中 %0a 是换行，可以代替空格。如union select 1,2可转换为union/xx/select/xx*/1,2

###### 3.编码绕过

少数waf不会对普通字符进行URL解码,还有一部分waf只会进行一次url解码，所以可以对payload进行二次url编码。常见的SQL编码有unicode、HEX、URL、ascll、base64等，XSS编码有：HTML、URL、ASCII、JS编码、base64等等。如 union select 1,2可对其进行url编码后进行绕过waf。

###### 4.关键字替换绕过

有些WAF会删除或者替换关键字，如遇到select union等敏感字词。如 union select 1,2,3可替换为ununionion selselectect 1,,2,3

###### 5.多请求拆分绕过

对于多个参数的语句，可以将注入语句分割插入。如这样的请求：?a=[inputa]&b=[inputb]可将参数a和b拼接如：and a=[inputa] and b=[inputb]

###### 6.利用cookies绕过

对于用了$_REQUEST来获取参数的网站可以尝试将payload放在cookie中进行绕过REQUEST会依次从GET POST cookie中获取参数，如果WAF只检测了GET/POST而没有检测cookie，可以将语句放在cookie中进行绕过。

###### 7.云WAF绕过之寻找网站源ip

采用云WAF的网站可以寻找网站真实ip来绕过云WAF的检测。常见方法有：采用多地ping的方法查看ip地址解析分析真实ip在线ping网站有：http://ping.chinaz.com/http://ping.aizhan.com/http://ce.cloud.360.cn/使用 nslookup 进行检测，原理同上。寻找网站历史解析记录。

找网站的二级域名、NS、MX记录等对应的ip。订阅网站邮件，查看邮件发送方的ip



##### 文件上传如何绕过

###### 分两种情况，一种是黑名单，另一个是白名单，绕过方式是不一样的

###### 黑名单

1. 后缀名不完整 .php5 .phtml等
2. .htacess
3. 大小写
4. 在数据包中 后文件缀名前加空格
5. 后缀名前加
6. 加上::$DATA
7. 未循环验证，可以使用x.php..类似的方法

###### 白名单

1. %00截断,

2. 图片马,

3. 条件竞争

   

##### 常见的逻辑漏洞

**越权漏洞**：指用户可以访问或操作不属于自己的数据或功能，比如平行越权，垂直越权，交叉越权等
**验证码漏洞**：指用户可以绕过或突破验证码的验证，比如验证码未失效，验证码返回信息，验证码分步验证等
**密码找回漏洞**：指用户可以重置他人账号密码，比如auth设计缺陷，response验证缺陷，验证码回传缺陷等
**订单金额篡改漏洞**：指用户可以修改订单的金额或数量，从而获得不正当利益，比如修改前端代码，修改数据包参数等
**执行顺序篡改漏洞**：指用户可以修改分步逻辑中的步骤数字，从而绕过支付或验证等
**接口无限制枚举漏洞**：指用户可以通过枚举接口的参数，获取敏感信息或功能，比如撞库，优惠券枚举，用户信息获取等
**Cookie设计缺陷漏洞**：指用户可以通过伪造或篡改Cookie信息，进行身份认证或权限提升，比如Cookie效验值过于简单，Cookie设置存在被盗风险，Cookie数据加密不规范等



##### 基础漏洞

A01:2021-**权限控制失效**：指用户可以访问或操作不属于自己的数据或功能，比如垂直越权，水平越权等
A02:2021-**加密机制失效**：指用户的敏感数据没有被正确地加密或保护，比如使用弱密码，存储明文数据，使用不安全的协议等
A03:2021-**注入式攻击**：指用户可以通过恶意字符将恶意代码注入到应用程序中，比如SQL注入，OS命令注入，跨站脚本攻击等
A04:2021-**不安全设计**：指应用程序在设计阶段没有考虑安全性，导致出现一些难以发现或修复的缺陷，比如缺乏威胁建模，缺乏安全设计模式，缺乏安全参考架构等
A05:2021-**安全设定缺陷**：指应用程序在配置方面存在一些错误或疏忽，导致暴露敏感信息或功能，比如使用默认密码，开启调试模式，未关闭不必要的端口等
A06:2021-**危险或过旧的组件**：指应用程序使用了一些有已知漏洞或不再维护的组件，导致被攻击者利用这些组件的弱点进行攻击，比如使用过时的库，使用未打补丁的框架，使用不受信任的源码等
A07:2021-**认证及验证机制失效**：指应用程序在验证用户身份或授权用户行为方面存在一些缺陷，导致被攻击者绕过或突破这些机制进行攻击，比如使用弱密码策略，使用不安全的令牌机制，使用不完善的验证码机制等
A08:2021-**软件及资料完整性失效**：指应用程序在更新软件或传输资料时没有做完整性的确认或验证，导致被攻击者篡改或伪造这些软件或资料进行攻击，比如使用不安全的签名机制，使用不安全的哈希算法，使用不安全的反序列化机制等
A09:2021-**安全记录及监控失效**：指应用程序在记录和监控用户行为或系统事件方面存在一些缺陷或不足，导致无法及时发现或响应攻击者的攻击行为，比如缺乏日志记录机制，缺乏异常检测机制，缺乏告警通知机制等
A10:2021-**服务器端请求伪造**：指应用程序在处理来自用户或其他服务器的请求时没有做充分的验证或过滤，导致被攻击者利用这些请求向内部网络或其他服务器发起恶意请求进行攻击，比如利用请求访问内部资源，利用请求执行远程命令，利用请求发起拒绝服务攻击等



##### web十大漏洞

跨站脚本攻击（XSS）、SQL注入攻击、远程文件包含（RFI）、本地文件包含（LFI）、缓冲区溢出攻击、跨站请求伪造（CSRF）、身份验证绕过、安全设置漏洞、路径遍历攻击和点击劫持。



##### 请求方式几种

目前常用的请求方式有八种，分别是GET、POST、HEAD、PUT、DELETE、OPTIONS、TRACE、CONNECT，get和post最常用



#### OWASP Top10有哪些漏洞

```
 SQL注入
 失效的身份认证
 敏感数据泄露
 XML外部实体（XXE）
 失效的访问控制
 安全配置错误
 跨站脚本（XSS）
 不安全的反序列化
 使用含有已知漏洞的组件
 不足的日志记录和监控
```







#### 正向SHELL和反向SHELL的区别

- 正向shell，攻击者连接被攻击者机器
- 反向shell，被攻击者主动连接攻击者
- 正向代理，客户端代理，服务器不知道实际发起请求的客户端
- 反向代理，服务器代理，客户端不知道实际提供服务的服务端



##### xss有几种，原理是什么，有什么区别？

三种，存储型，反射型，dom型

区别

![1](C:\Users\26278\Documents\GitHub\tools\image\XSS三种类型的区别.png)







##### csrf跟ssrf的区别

###### 一个是客户端请求伪造，一个是服务端请求伪造

Csrf

黑客构造html表单，用户访问后会用自己的浏览器提交表单，造成利用

如何防御：加token，判断header

Ssrf

大都是因为服务端提供了从其他服务器获取数据功能并且没有对目标地址做过滤和限制才造成的

修复方法

可以采取白名单,限制内网Ip。

对返回内容进行识别

禁用一些不必要的协议

统一错误信息，避免用户可以根据错误信息来判断远端服务器的端口状态

过滤函数，file_get_contents fsockopen()  curl_exec()



CSRF、SSRF和重放攻击有什么区别？
•	CSRF是跨站请求伪造攻击，由客户端发起
•	SSRF是服务器端请求伪造，由服务器发起
•	重放攻击是将截获的数据包进行重放，达到身份认证等目的



##### **Linux的登录日志查看文件**

Linux的登录日志查看文件
linux日志文件说明
/var/log/message 系统启动后的信息和错误日志，是Red Hat Linux中最常用的日志之一
/var/log/secure 与安全相关的日志信息
/var/log/maillog 与邮件相关的日志信息
/var/log/cron 与定时任务相关的日志信息
/var/log/spooler 与UUCP和news设备相关的日志信息
/var/log/boot.log 守护进程启动和停止相关的日志消息
/var/log/wtmp 该日志文件永久记录每个用户登录、注销及系统的启动、停机的事件



##### 获得文件读取漏洞，通常会读哪些文件，Linux和windows都谈谈  （配置文件）

敏感信息
Windows：
C:\boot.ini //查看系统版本
C:\Windows\System32\inetsrv\MetaBase.xml //IIS配置文件
C:\Windows\repair\sam //存储系统初次安装的密码
C:\Program Files\mysql\my.ini //Mysql配置
C:\Program Files\mysql\data\mysql\user.MYD //Mysql root
C:\Windows\php.ini //php配置信息
C:\Windows\my.ini //Mysql配置信息

Linux：
/root/.ssh/authorized_keys //如需登录到远程主机，需要到.ssh目录下，新建authorized_keys文件，并将id_rsa.pub内容复制进去
/root/.ssh/id_rsa //ssh私钥,ssh公钥是id_rsa.pub
/root/.ssh/id_ras.keystore //记录每个访问计算机用户的公钥
/root/.ssh/known_hosts
//ssh会把每个访问过计算机的公钥(public key)都记录在~/.ssh/known_hosts。当下次访问相同计算机时，OpenSSH会核对公钥。如果公钥不同，OpenSSH会发出警告， 避免你受到DNS Hijack之类的攻击。
/etc/passwd // 账户信息
/etc/shadow // 账户密码文件
/etc/my.cnf //mysql 配置文件
/etc/httpd/conf/httpd.conf // Apache配置文件
/root/.bash_history //用户历史命令记录文件
/root/.mysql_history //mysql历史命令记录文件
/proc/self/fd/fd[0-9]*(文件标识符)
/proc/mounts //记录系统挂载设备
/porc/config.gz //内核配置文件
/var/lib/mlocate/mlocate.db //全文件路径
/porc/self/cmdline //当前进程的cmdline参数



##### 设备出现了误报如何处置（日志）

要确认设备是否误报，应当先去查看设备的完整流量日志等信息。在护网过程中如果确实存在异常流量应当及时进行上报，确认是误报后做好事件记录



##### 如何查看区分是扫描流量和手动流量

扫描的数据量大，请求流量有规律可寻，手动流量请求少 间隔略长 

